{"ast":null,"code":"var _jsxFileName = \"/home/bmacerbi/Desktop/turingVoting/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport './App.css';\nimport TuringVotingABI from './TuringVoting.json';\nimport { Button, TextField, Typography, Container, Box, MenuItem, Select, FormControl, InputLabel, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst contractAddress = \"0x5fbdb2315678afecb367f032d93f642f64180aa3\";\nconst abi = TuringVotingABI.abi;\nfunction App() {\n  _s();\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [account, setAccount] = useState(null);\n  const [voterName, setVoterName] = useState('');\n  const [amount, setAmount] = useState('');\n  const [votingEnabled, setVotingEnabled] = useState(false);\n  const [voterBalances, setVoterBalances] = useState([]);\n  const voterNames = [\"nome0\", \"nome1\", \"nome2\", \"nome3\", \"nome4\", \"nome5\", \"nome6\", \"nome7\", \"nome8\", \"nome9\", \"nome10\", \"nome11\", \"nome12\", \"nome13\", \"nome14\", \"nome15\", \"nome16\", \"nome17\", \"nome18\", \"nome19\"];\n  useEffect(() => {\n    async function init() {\n      if (window.ethereum) {\n        try {\n          await window.ethereum.request({\n            method: 'eth_requestAccounts'\n          });\n          const provider = new ethers.BrowserProvider(window.ethereum);\n          const signer = await provider.getSigner();\n          const contract = new ethers.Contract(contractAddress, abi, signer);\n          const account = await signer.getAddress();\n          setProvider(provider);\n          setSigner(signer);\n          setContract(contract);\n          setAccount(account);\n          const isVotingEnabled = await contract.votingEnabled();\n          setVotingEnabled(isVotingEnabled);\n          fetchVoterBalances(contract);\n        } catch (error) {\n          console.error('Error initializing contract:', error);\n        }\n      } else {\n        console.error('Ethereum provider not found. Install MetaMask.');\n      }\n    }\n    init();\n  }, []);\n  const fetchVoterBalances = async contract => {\n    const balances = [];\n    for (const name of voterNames) {\n      try {\n        const nameAddress = await contract.getVoterAddress(name);\n        if (nameAddress === \"0x0000000000000000000000000000000000000000\") {\n          throw new Error(\"Invalid address for voter name: \" + name);\n        }\n        const balance = await contract.balanceOf(nameAddress);\n        balances.push({\n          name,\n          balance: parseFloat(ethers.formatEther(balance))\n        });\n      } catch (error) {\n        console.error(`Error fetching balance for ${name}:`, error);\n        balances.push({\n          name,\n          balance: 0\n        });\n      }\n    }\n    balances.sort((a, b) => b.balance - a.balance);\n    setVoterBalances(balances);\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      my: 4,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        children: \"Voter Balances\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: \"Voter Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: \"Balance (Turing)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: voterBalances.map((voter, index) => /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: voter.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                align: \"right\",\n                children: voter.balance\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"A8OCYPCAXI6NKQU5lUqHocZsxbw=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","ethers","TuringVotingABI","Button","TextField","Typography","Container","Box","MenuItem","Select","FormControl","InputLabel","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","jsxDEV","_jsxDEV","contractAddress","abi","App","_s","provider","setProvider","signer","setSigner","contract","setContract","account","setAccount","voterName","setVoterName","amount","setAmount","votingEnabled","setVotingEnabled","voterBalances","setVoterBalances","voterNames","init","window","ethereum","request","method","BrowserProvider","getSigner","Contract","getAddress","isVotingEnabled","fetchVoterBalances","error","console","balances","name","nameAddress","getVoterAddress","Error","balance","balanceOf","push","parseFloat","formatEther","sort","a","b","children","my","variant","fileName","_jsxFileName","lineNumber","columnNumber","component","align","map","voter","index","_c","$RefreshReg$"],"sources":["/home/bmacerbi/Desktop/turingVoting/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport './App.css';\nimport TuringVotingABI from './TuringVoting.json';\nimport { Button, TextField, Typography, Container, Box, MenuItem, Select, FormControl, InputLabel, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper } from '@mui/material';\n\nconst contractAddress = \"0x5fbdb2315678afecb367f032d93f642f64180aa3\";\nconst abi = TuringVotingABI.abi;\n\nfunction App() {\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [account, setAccount] = useState(null);\n  const [voterName, setVoterName] = useState('');\n  const [amount, setAmount] = useState('');\n  const [votingEnabled, setVotingEnabled] = useState(false);\n  const [voterBalances, setVoterBalances] = useState([]);\n\n  const voterNames = [\n    \"nome0\",\"nome1\", \"nome2\", \"nome3\", \"nome4\", \"nome5\",\n    \"nome6\", \"nome7\", \"nome8\", \"nome9\", \"nome10\",\n    \"nome11\", \"nome12\", \"nome13\", \"nome14\", \"nome15\",\n    \"nome16\", \"nome17\", \"nome18\", \"nome19\"\n  ];\n\n  useEffect(() => {\n    async function init() {\n      if (window.ethereum) {\n        try {\n          await window.ethereum.request({ method: 'eth_requestAccounts' });\n          const provider = new ethers.BrowserProvider(window.ethereum);\n          const signer = await provider.getSigner();\n          const contract = new ethers.Contract(contractAddress, abi, signer);\n          const account = await signer.getAddress();\n\n          setProvider(provider);\n          setSigner(signer);\n          setContract(contract);\n          setAccount(account);\n\n          const isVotingEnabled = await contract.votingEnabled();\n          setVotingEnabled(isVotingEnabled);\n\n          fetchVoterBalances(contract);\n        } catch (error) {\n          console.error('Error initializing contract:', error);\n        }\n      } else {\n        console.error('Ethereum provider not found. Install MetaMask.');\n      }\n    }\n    init();\n  }, []);\n\n  const fetchVoterBalances = async (contract) => {\n    const balances = [];\n\n    for (const name of voterNames) {\n      try {\n        const nameAddress = await contract.getVoterAddress(name);\n\n        if (nameAddress === \"0x0000000000000000000000000000000000000000\") {\n          throw new Error(\"Invalid address for voter name: \" + name);\n        }\n\n        const balance = await contract.balanceOf(nameAddress);\n        balances.push({ name, balance: parseFloat(ethers.formatEther(balance)) });\n      } catch (error) {\n        console.error(`Error fetching balance for ${name}:`, error);\n        balances.push({ name, balance: 0 });\n      }\n    }\n\n    balances.sort((a, b) => b.balance - a.balance);\n    setVoterBalances(balances);\n  };\n\n  return (\n    <Container>\n      <Box my={4}>\n        <Typography variant=\"h5\">Voter Balances</Typography>\n        <TableContainer component={Paper}>\n          <Table>\n            <TableHead>\n              <TableRow>\n                <TableCell>Voter Name</TableCell>\n                <TableCell align=\"right\">Balance (Turing)</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              {voterBalances.map((voter, index) => (\n                <TableRow key={index}>\n                  <TableCell>{voter.name}</TableCell>\n                  <TableCell align=\"right\">{voter.balance}</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </Box>\n    </Container>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}