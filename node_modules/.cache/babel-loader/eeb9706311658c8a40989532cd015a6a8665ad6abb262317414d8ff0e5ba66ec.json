{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ethers}from'ethers';import'./App.css';import{Button,TextField,Typography,Container,Box,MenuItem,Select,FormControl,InputLabel}from'@mui/material';const contractAddress=\"0xd72FBb85Cc0c36aC0E476B27f6FBd252bae8624A\";// Replace with your contract address\nimport TuringVotingABI from\"./TuringVoting.json\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const abi=TuringVotingABI.abi;function App(){const[provider,setProvider]=useState(null);const[signer,setSigner]=useState(null);const[contract,setContract]=useState(null);const[account,setAccount]=useState(null);const[voterName,setVoterName]=useState('');const[amount,setAmount]=useState('');const[votingEnabled,setVotingEnabled]=useState(false);const voterNames=[\"nome1\",\"nome2\",\"nome3\",\"nome4\",\"nome5\",\"nome6\",\"nome7\",\"nome8\",\"nome9\",\"nome10\",\"nome11\",\"nome12\",\"nome13\",\"nome14\",\"nome15\",\"nome16\",\"nome17\",\"nome18\",\"nome19\",\"nome20\"];useEffect(()=>{async function init(){if(window.ethereum){try{await window.ethereum.request({method:'eth_requestAccounts'});const provider=new ethers.BrowserProvider(window.ethereum);const signer=await provider.getSigner();const contract=new ethers.Contract(contractAddress,abi,signer);const account=await signer.getAddress();setProvider(provider);setSigner(signer);setContract(contract);setAccount(account);const isVotingEnabled=await contract.votingEnabled();setVotingEnabled(isVotingEnabled);console.log('Initialization successful:',{provider,signer,contract,account});}catch(error){console.error('Error initializing contract:',error);}}else{console.error('Ethereum provider not found. Install MetaMask.');}}init();},[]);const handleVote=async()=>{if(!contract||!voterName||!amount)return;try{const tx=await contract.vote(voterName,ethers.parseEther(amount));// Pass voterName instead of codinome\nawait tx.wait();alert('Vote successful!');}catch(error){console.error('Error voting:',error);alert(\"Failed to vote: \".concat(error.message));}};const toggleVoting=async enable=>{if(!contract)return;try{const tx=enable?await contract.votingOn():await contract.votingOff();await tx.wait();setVotingEnabled(enable);alert(\"Voting \".concat(enable?'enabled':'disabled'));}catch(error){console.error('Error toggling voting:',error);alert('Failed to toggle voting');}};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Box,{my:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Turing Voting DApp\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Connected Account: \",account]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",children:[\"Voting Status: \",votingEnabled?'Enabled':'Disabled']}),/*#__PURE__*/_jsxs(Box,{my:2,children:[/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Voter Name\"}),/*#__PURE__*/_jsx(Select,{value:voterName,onChange:e=>setVoterName(e.target.value),label:\"Voter Name\",children:voterNames.map((name,index)=>/*#__PURE__*/_jsx(MenuItem,{value:name,children:name},index))})]}),/*#__PURE__*/_jsx(TextField,{label:\"Amount (in Turing)\",variant:\"outlined\",type:\"number\",value:amount,onChange:e=>setAmount(e.target.value),fullWidth:true,margin:\"normal\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleVote,children:\"Vote\"})]}),/*#__PURE__*/_jsx(Box,{my:2,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:()=>toggleVoting(!votingEnabled),children:votingEnabled?'Disable Voting':'Enable Voting'})})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","ethers","Button","TextField","Typography","Container","Box","MenuItem","Select","FormControl","InputLabel","contractAddress","TuringVotingABI","jsx","_jsx","jsxs","_jsxs","abi","App","provider","setProvider","signer","setSigner","contract","setContract","account","setAccount","voterName","setVoterName","amount","setAmount","votingEnabled","setVotingEnabled","voterNames","init","window","ethereum","request","method","BrowserProvider","getSigner","Contract","getAddress","isVotingEnabled","console","log","error","handleVote","tx","vote","parseEther","wait","alert","concat","message","toggleVoting","enable","votingOn","votingOff","children","my","variant","component","gutterBottom","fullWidth","value","onChange","e","target","label","map","name","index","type","margin","color","onClick"],"sources":["/home/bmacerbi/Documents/BlockChain/turingVoting/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport './App.css';\nimport { Button, TextField, Typography, Container, Box, MenuItem, Select, FormControl, InputLabel } from '@mui/material';\n\nconst contractAddress = \"0xd72FBb85Cc0c36aC0E476B27f6FBd252bae8624A\"; // Replace with your contract address\nimport TuringVotingABI from \"./TuringVoting.json\";\nconst abi = TuringVotingABI.abi;\n\nfunction App() {\n  const [provider, setProvider] = useState(null);\n  const [signer, setSigner] = useState(null);\n  const [contract, setContract] = useState(null);\n  const [account, setAccount] = useState(null);\n  const [voterName, setVoterName] = useState(''); \n  const [amount, setAmount] = useState('');\n  const [votingEnabled, setVotingEnabled] = useState(false);\n\n  const voterNames = [\n    \"nome1\", \"nome2\", \"nome3\", \"nome4\", \"nome5\",\n    \"nome6\", \"nome7\", \"nome8\", \"nome9\", \"nome10\",\n    \"nome11\", \"nome12\", \"nome13\", \"nome14\", \"nome15\",\n    \"nome16\", \"nome17\", \"nome18\", \"nome19\", \"nome20\"\n  ];\n\n  useEffect(() => {\n    async function init() {\n      if (window.ethereum) {\n        try {\n          await window.ethereum.request({ method: 'eth_requestAccounts' });\n          const provider = new ethers.BrowserProvider(window.ethereum);\n          const signer = await provider.getSigner();\n          const contract = new ethers.Contract(contractAddress, abi, signer);\n          const account = await signer.getAddress();\n\n          setProvider(provider);\n          setSigner(signer);\n          setContract(contract);\n          setAccount(account);\n\n          const isVotingEnabled = await contract.votingEnabled();\n          setVotingEnabled(isVotingEnabled);\n\n          console.log('Initialization successful:', { provider, signer, contract, account });\n        } catch (error) {\n          console.error('Error initializing contract:', error);\n        }\n      } else {\n        console.error('Ethereum provider not found. Install MetaMask.');\n      }\n    }\n    init();\n  }, []);\n\n  const handleVote = async () => {\n    if (!contract || !voterName || !amount) return;\n    try {\n      const tx = await contract.vote(voterName, ethers.parseEther(amount)); // Pass voterName instead of codinome\n      await tx.wait();\n      alert('Vote successful!');\n    } catch (error) {\n      console.error('Error voting:', error);\n      alert(`Failed to vote: ${error.message}`);\n    }\n  };\n\n  const toggleVoting = async (enable) => {\n    if (!contract) return;\n    try {\n      const tx = enable ? await contract.votingOn() : await contract.votingOff();\n      await tx.wait();\n      setVotingEnabled(enable);\n      alert(`Voting ${enable ? 'enabled' : 'disabled'}`);\n    } catch (error) {\n      console.error('Error toggling voting:', error);\n      alert('Failed to toggle voting');\n    }\n  };\n\n  return (\n    <Container>\n      <Box my={4}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          Turing Voting DApp\n        </Typography>\n        <Typography variant=\"body1\">Connected Account: {account}</Typography>\n        <Typography variant=\"body1\">Voting Status: {votingEnabled ? 'Enabled' : 'Disabled'}</Typography>\n\n        <Box my={2}>\n          <FormControl fullWidth variant=\"outlined\">\n            <InputLabel>Voter Name</InputLabel>\n            <Select\n              value={voterName}\n              onChange={(e) => setVoterName(e.target.value)}\n              label=\"Voter Name\"\n            >\n              {voterNames.map((name, index) => (\n                <MenuItem key={index} value={name}>\n                  {name}\n                </MenuItem>\n              ))}\n            </Select>\n          </FormControl>\n\n          <TextField\n            label=\"Amount (in Turing)\"\n            variant=\"outlined\"\n            type=\"number\"\n            value={amount}\n            onChange={(e) => setAmount(e.target.value)}\n            fullWidth\n            margin=\"normal\"\n          />\n          <Button variant=\"contained\" color=\"primary\" onClick={handleVote}>\n            Vote\n          </Button>\n        </Box>\n\n        <Box my={2}>\n          <Button variant=\"contained\" color=\"secondary\" onClick={() => toggleVoting(!votingEnabled)}>\n            {votingEnabled ? 'Disable Voting' : 'Enable Voting'}\n          </Button>\n        </Box>\n      </Box>\n    </Container>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}